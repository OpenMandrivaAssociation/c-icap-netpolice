--- base64.c	Mon Oct 25 14:36:07 2010 +0400
+++ base64.c	Mon Oct 25 14:42:03 2010 +0400
@@ -46,7 +46,7 @@
     int i;
     unsigned char *str,*result;
     
-    if (!str || !decoded || !len)
+    if (!encoded || !decoded || !len)
 	return 0;
 
     str = (unsigned char *)encoded;
